<!DOCTYPE html>
<html lang="en">
<head>
  <!-- PWA -->
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#0a0a0f">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Noor">
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/icon-152.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/icon-120.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/icon-192.png">
  <link rel="shortcut icon" href="/icons/favicon.ico">
  <!-- Google Analytics GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZZG5K1EVSV"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag("js", new Date());
    gtag("config", "G-ZZG5K1EVSV", {page_title: 'Homepage'});
  </script>
  <!-- Vercel Analytics -->
  <script defer src="/_vercel/insights/script.js"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Noor â€” Your Ramadan Companion</title>
  <meta name="description" content="Ramadan Real Talk Bingo + Personal Dua Generator. Made for the Ummah. Ramadan 1447H.">
  <meta property="og:title" content="Noor ğŸŒ™ â€” Your Ramadan Companion">
  <meta property="og:description" content="Ramadan Real Talk Bingo + Personal Dua Generator. Made for Muslims, with love. Ramadan 1447H.">
  <meta property="og:image" content="https://raw.githubusercontent.com/aboladelawal/noor/main/og-noor.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:url" content="https://noor-seven-lac.vercel.app?ref=share">
  <meta property="og:type" content="website">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Noor ğŸŒ™ â€” Your Ramadan Companion">
  <meta name="twitter:description" content="Ramadan Real Talk Bingo + Personal Dua Generator. Made for Muslims, with love.">
  <meta name="twitter:image" content="https://raw.githubusercontent.com/aboladelawal/noor/main/og-noor.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=Tajawal:wght@300;400;500&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0a0a0f; --gold: #c9a84c; --gold-light: #e8c97a;
      --gold-dim: #7a6130; --cream: #f5efe0; --text: #e8dcc8; --text-dim: #8a7d6a;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { background: var(--bg); color: var(--text); font-family: 'Tajawal', sans-serif; min-height: 100vh; overflow-x: hidden; }
    body::before {
      content: ''; position: fixed; inset: 0; pointer-events: none; z-index: 0;
      background-image:
        radial-gradient(1px 1px at 15% 20%, rgba(201,168,76,0.6) 0%, transparent 100%),
        radial-gradient(1px 1px at 85% 10%, rgba(201,168,76,0.4) 0%, transparent 100%),
        radial-gradient(1px 1px at 40% 80%, rgba(201,168,76,0.5) 0%, transparent 100%),
        radial-gradient(1px 1px at 70% 60%, rgba(201,168,76,0.3) 0%, transparent 100%),
        radial-gradient(1px 1px at 25% 45%, rgba(201,168,76,0.4) 0%, transparent 100%),
        radial-gradient(1.5px 1.5px at 90% 75%, rgba(201,168,76,0.5) 0%, transparent 100%),
        radial-gradient(1px 1px at 55% 30%, rgba(201,168,76,0.3) 0%, transparent 100%),
        radial-gradient(1px 1px at 10% 90%, rgba(201,168,76,0.4) 0%, transparent 100%),
        radial-gradient(1px 1px at 60% 15%, rgba(201,168,76,0.3) 0%, transparent 100%),
        radial-gradient(1.5px 1.5px at 35% 65%, rgba(201,168,76,0.5) 0%, transparent 100%);
    }
    .container { position: relative; z-index: 1; max-width: 480px; margin: 0 auto; padding: 0 24px; min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; }
    .moon-wrap { margin-bottom: 8px; animation: float 4s ease-in-out infinite; }
    @keyframes float { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-8px)} }
    .moon { font-size: 64px; filter: drop-shadow(0 0 20px rgba(201,168,76,0.6)); }
    .app-name { font-family: 'Cormorant Garamond', serif; font-size: 72px; font-weight: 300; color: var(--gold-light); letter-spacing: 8px; text-align: center; line-height: 1; text-shadow: 0 0 40px rgba(201,168,76,0.4); }
    .app-name span { font-style: italic; }
    .arabic-sub { font-size: 18px; color: var(--gold-dim); letter-spacing: 3px; text-align: center; margin-top: 4px; font-weight: 300; }

    /* Greeting line */
    .greeting {
      font-family: 'Cormorant Garamond', serif;
      font-size: 20px;
      font-style: italic;
      color: var(--gold-light);
      text-align: center;
      margin-top: 16px;
      letter-spacing: 0.5px;
      opacity: 0;
      transform: translateY(6px);
      transition: opacity 0.7s ease, transform 0.7s ease;
      min-height: 28px;
    }
    .greeting.visible { opacity: 1; transform: translateY(0); }

    .ramadan-badge { display: inline-flex; align-items: center; background: rgba(201,168,76,0.1); border: 1px solid rgba(201,168,76,0.2); border-radius: 20px; padding: 6px 14px; font-size: 12px; color: var(--gold); letter-spacing: 1px; margin-top: 12px; margin-bottom: 8px; animation: pulse 3s ease-in-out infinite; }
    @keyframes pulse { 0%,100%{box-shadow:0 0 0 0 rgba(201,168,76,0.2)} 50%{box-shadow:0 0 0 8px rgba(201,168,76,0)} }
    .tagline { font-size: 13px; color: var(--text-dim); text-align: center; margin-bottom: 36px; letter-spacing: 1px; font-weight: 300; font-style: italic; }

    .cards { width: 100%; display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    .card { background: linear-gradient(135deg, rgba(201,168,76,0.08), rgba(201,168,76,0.03)); border: 1px solid rgba(201,168,76,0.2); border-radius: 16px; padding: 20px 16px; text-decoration: none; color: inherit; display: block; transition: all 0.3s ease; position: relative; overflow: hidden; cursor: pointer; }
    .card::before { content: ''; position: absolute; inset: 0; background: linear-gradient(135deg, rgba(201,168,76,0.1), transparent); opacity: 0; transition: opacity 0.3s ease; }
    .card:hover { border-color: rgba(201,168,76,0.5); transform: translateY(-2px); box-shadow: 0 8px 32px rgba(201,168,76,0.15); }
    .card:hover::before { opacity: 1; }
    .card-icon { font-size: 28px; margin-bottom: 10px; display: block; }
    .card-label { font-size: 10px; letter-spacing: 2px; color: var(--gold); text-transform: uppercase; font-weight: 500; margin-bottom: 4px; }
    .card-title { font-family: 'Cormorant Garamond', serif; font-size: 22px; font-weight: 400; color: var(--cream); margin-bottom: 6px; line-height: 1.2; }
    .card-desc { font-size: 12px; color: var(--text-dim); line-height: 1.5; font-weight: 300; }
    .card-bingo { background: linear-gradient(135deg, rgba(201,168,76,0.12), rgba(180,120,40,0.05)); }
    .card-iftar { background: linear-gradient(135deg, rgba(180,80,20,0.1), rgba(201,168,76,0.04)); }
    .card-deeds { background: linear-gradient(135deg, rgba(40,120,80,0.1), rgba(201,168,76,0.04)); }
    .footer { margin-top: 48px; margin-bottom: 32px; text-align: center; font-size: 12px; color: var(--text-dim); font-weight: 300; letter-spacing: 1px; line-height: 1.8; }
    .footer-name { color: var(--gold-dim); margin-bottom: 14px; }
    .footer-links { display: flex; justify-content: center; align-items: center; gap: 20px; margin-top: 12px; }
    .footer-link { display: flex; flex-direction: column; align-items: center; gap: 5px; text-decoration: none; color: var(--text-dim); transition: color 0.2s; }
    .footer-link:hover { color: var(--gold); }
    .footer-link-icon { font-size: 20px; }
    .footer-link-label { font-size: 10px; letter-spacing: 1px; }

    /* Overlays */
    .overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.92); z-index: 1000; align-items: center; justify-content: center; padding: 24px; }
    .overlay-box { background: #0f0f1a; border: 1px solid rgba(201,168,76,0.35); border-radius: 20px; padding: 40px 28px; max-width: 380px; width: 100%; text-align: center; }
    .overlay-moon { font-size: 52px; margin-bottom: 14px; }
    .overlay-title { font-family: 'Cormorant Garamond', serif; font-size: 32px; color: var(--gold-light); margin-bottom: 8px; line-height: 1.3; }
    .overlay-sub { font-size: 13px; color: var(--text-dim); line-height: 1.8; margin-bottom: 28px; }
    .overlay-sub small { font-size: 11px; color: #5a4d3a; }
    .overlay-input { width: 100%; background: rgba(255,255,255,0.04); border: 1px solid rgba(201,168,76,0.25); border-radius: 12px; padding: 14px 16px; color: var(--text); font-family: 'Tajawal', sans-serif; font-size: 15px; outline: none; margin-bottom: 14px; text-align: center; }
    .overlay-input:focus { border-color: rgba(201,168,76,0.5); }
    .overlay-btn { width: 100%; padding: 14px; background: linear-gradient(135deg, #c9a84c, #a07828); border: none; border-radius: 12px; color: #0a0a0f; font-size: 15px; font-weight: 600; cursor: pointer; font-family: 'Tajawal', sans-serif; margin-bottom: 10px; letter-spacing: 0.5px; }
    .overlay-skip { width: 100%; padding: 10px; background: transparent; border: none; color: #5a4d3a; font-size: 12px; cursor: pointer; font-family: 'Tajawal', sans-serif; }
    .overlay-skip:hover { color: var(--gold-dim); }
  </style>
</head>
<body>
  <div class="container">
    <div class="moon-wrap"><div class="moon">â˜½</div></div>
    <h1 class="app-name"><span>Noor</span></h1>
    <div class="arabic-sub">Ù†ÙˆØ±</div>

    <!-- Personal greeting â€” fades in once name is known -->
    <div class="greeting" id="greeting"></div>

    <div class="ramadan-badge" id="ramadan-badge">âœ¦ Ramadan Mubarak âœ¦</div>
    <p class="tagline" id="tagline">Your companion for the blessed month</p>

    <div class="cards">
      <a href="bingo.html" class="card card-bingo">
        <span class="card-icon">â˜‘ï¸</span>
        <div class="card-label">For the laughs</div>
        <div class="card-title">Ramadan Real Talk</div>
        <div class="card-desc">How is Ramadan going? No judgment.</div>
      </a>
      <a href="dua.html" class="card">
        <span class="card-icon">ğŸ¤²</span>
        <div class="card-label">For the heart</div>
        <div class="card-title">Ya Allah...</div>
        <div class="card-desc">Tell Him what's on your heart.</div>
      </a>
      <a href="iftar.html" class="card card-iftar">
        <span class="card-icon">ğŸŒ…</span>
        <div class="card-label">Live countdown</div>
        <div class="card-title">Iftar Time</div>
        <div class="card-desc">How long until you can eat?</div>
      </a>
      <a href="deeds.html" class="card card-deeds">
        <span class="card-icon">âœ…</span>
        <div class="card-label">Daily tracker</div>
        <div class="card-title">Good Deeds</div>
        <div class="card-desc">Tap what you've done today.</div>
      </a>
    </div>
    <div class="footer">
      <div class="footer-name">Made with love for the Ummah &nbsp;Â·&nbsp; Ramadan 1447H<br>Abolade Lawal</div>
      <div class="footer-links">
        <a class="footer-link" href="https://instagram.com/__kingmufasa_" target="_blank" rel="noopener">
          <span class="footer-link-icon">ğŸ“¸</span>
          <span class="footer-link-label">Instagram</span>
        </a>
        <a class="footer-link" href="https://x.com/__kingmufasa_" target="_blank" rel="noopener">
          <span class="footer-link-icon">ğ•</span>
          <span class="footer-link-label">Twitter / X</span>
        </a>
        <a class="footer-link" href="https://wa.me/2347037135181" target="_blank" rel="noopener">
          <span class="footer-link-icon">ğŸ’¬</span>
          <span class="footer-link-label">WhatsApp</span>
        </a>
      </div>
    </div>
  </div>

  <!-- FIRST VISIT: one-time name prompt -->
  <div class="overlay" id="name-overlay">
    <div class="overlay-box">
      <div class="overlay-moon">â˜½</div>
      <div class="overlay-title">Ramadan Mubarak</div>
      <div class="overlay-sub">
        What shall we call you?<br>
        <small>We'll greet you personally on every visit â€” no account needed.</small>
      </div>
      <input class="overlay-input" id="name-input" type="text" placeholder="Your name or nickname..."
        onkeydown="if(event.key==='Enter') saveName()">
      <button class="overlay-btn" onclick="saveName()">Enter Noor âœ¦</button>
      <button class="overlay-skip" onclick="skipName()">Skip â€” enter without a name</button>
    </div>
  </div>

  <!-- ?from=Name: recipient sees who sent the link -->
  <div class="overlay" id="from-overlay">
    <div class="overlay-box">
      <div class="overlay-moon">ğŸŒ™</div>
      <div class="overlay-title" id="from-title"></div>
      <div class="overlay-sub">They wanted you to have a peaceful Ramadan.<br>Explore the bingo or find a dua for your heart.</div>
      <button class="overlay-btn" onclick="closeFromOverlay()">Enter Noor âœ¦</button>
    </div>
  </div>

  <script>
    // â”€â”€â”€ RAMADAN DATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // Ramadan 1447H starts Feb 18, 2026 WAT (UTC+1)
    const RAMADAN_START = new Date('2026-02-18T00:00:00+01:00');

    function getRamadanDay() {
      const diff = new Date() - RAMADAN_START;
      return Math.floor(diff / 86400000) + 1;
    }

    function getRamadanPhase(day) {
      if (day >= 1  && day <= 10) return 'The first 10 days â€” the days of Mercy';
      if (day >= 11 && day <= 20) return 'The second 10 days â€” the days of Forgiveness';
      if (day >= 21 && day <= 30) return 'The last 10 days â€” seek Laylatul Qadr ğŸŒ™';
      if (day > 30)               return 'May Allah accept from us and from you';
      return 'Your companion for the blessed month';
    }

    function updateBadge() {
      const day = getRamadanDay();
      const badge   = document.getElementById('ramadan-badge');
      const tagline = document.getElementById('tagline');
      if (day >= 1 && day <= 30) {
        badge.innerHTML = `âœ¦ Ramadan Day ${day} Â· 1447H âœ¦`;
      } else if (day > 30) {
        badge.innerHTML = `âœ¦ Eid Mubarak ğŸŒ™ âœ¦`;
      }
      tagline.textContent = getRamadanPhase(day);
    }

    // â”€â”€â”€ GREETING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function showGreeting(name) {
      const day = getRamadanDay();
      const el  = document.getElementById('greeting');
      if (!name) { el.style.display = 'none'; return; }
      const dayText = (day >= 1 && day <= 30) ? ` â€” Day ${day} of Ramadan` : '';
      el.textContent = `Salam Alaykum, ${name}${dayText} ğŸŒ™`;
      el.style.display = 'block';
      // Fade in after a tick
      setTimeout(() => el.classList.add('visible'), 80);
    }

    // â”€â”€â”€ NAME PROMPT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function saveName() {
      const name = document.getElementById('name-input').value.trim();
      if (name) localStorage.setItem('noor_name', name);
      localStorage.setItem('noor_visited', '1');
      document.getElementById('name-overlay').style.display = 'none';
      showGreeting(name);
    }

    function skipName() {
      localStorage.setItem('noor_visited', '1');
      document.getElementById('name-overlay').style.display = 'none';
    }

    // â”€â”€â”€ ?from= OVERLAY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function closeFromOverlay() {
      document.getElementById('from-overlay').style.display = 'none';
      // If first visit, show name prompt after a beat
      if (!localStorage.getItem('noor_visited')) {
        setTimeout(() => {
          document.getElementById('name-overlay').style.display = 'flex';
        }, 400);
      }
    }

    // â”€â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    updateBadge();

    const params   = new URLSearchParams(window.location.search);
    const fromName = params.get('from');   // ?from=Bolade
    const visited  = localStorage.getItem('noor_visited');
    const savedName = localStorage.getItem('noor_name');

    if (fromName) {
      // Someone shared with ?from=their name
      document.getElementById('from-title').textContent = `${decodeURIComponent(fromName)} sent you this for Ramadan ğŸŒ™`;
      document.getElementById('from-overlay').style.display = 'flex';
    } else if (!visited) {
      // First time visitor â€” ask for name
      document.getElementById('name-overlay').style.display = 'flex';
    } else if (savedName) {
      // Returning visitor â€” greet them
      showGreeting(savedName);
    }
  </script>

  <script>
    // â”€â”€ Service Worker Registration â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(reg => console.log('Noor SW registered'))
          .catch(err => console.log('SW error:', err));
      });
    }

    // â”€â”€ iOS Install Banner â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function isIos() {
      return /iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase());
    }
    function isInStandaloneMode() {
      return ('standalone' in navigator) && navigator.standalone;
    }
    function showIosBanner() {
      if (isIos() && !isInStandaloneMode() && !localStorage.getItem('noor_ios_banner_dismissed')) {
        const banner = document.createElement('div');
        banner.id = 'ios-install-banner';
        banner.innerHTML = `
          <div style="position:fixed;bottom:0;left:0;right:0;z-index:9999;background:#1a1408;border-top:1px solid rgba(201,168,76,0.3);padding:16px 20px;display:flex;align-items:center;gap:14px;font-family:'Tajawal',sans-serif;">
            <img src="/icons/apple-touch-icon.png" style="width:48px;height:48px;border-radius:12px;flex-shrink:0;">
            <div style="flex:1;">
              <div style="color:#e8c97a;font-size:14px;font-weight:600;margin-bottom:2px;">Add Noor to Home Screen</div>
              <div style="color:#8a7d6a;font-size:12px;line-height:1.4;">Tap <strong style="color:#c9a84c;">Share</strong> then <strong style="color:#c9a84c;">"Add to Home Screen"</strong> for the best experience ğŸŒ™</div>
            </div>
            <button onclick="document.getElementById('ios-install-banner').remove(); localStorage.setItem('noor_ios_banner_dismissed','1')" style="background:none;border:none;color:#7a6130;font-size:22px;cursor:pointer;padding:4px;flex-shrink:0;">âœ•</button>
          </div>`;
        document.body.appendChild(banner);
      }
    }
    window.addEventListener('load', showIosBanner);

    // â”€â”€ Android Install Prompt â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    let deferredPrompt;
    window.addEventListener('beforeinstallprompt', e => {
      e.preventDefault();
      deferredPrompt = e;
      if (!localStorage.getItem('noor_android_installed')) {
        const banner = document.createElement('div');
        banner.id = 'android-install-banner';
        banner.innerHTML = `
          <div style="position:fixed;bottom:0;left:0;right:0;z-index:9999;background:#1a1408;border-top:1px solid rgba(201,168,76,0.3);padding:16px 20px;display:flex;align-items:center;gap:14px;font-family:'Tajawal',sans-serif;">
            <img src="/icons/apple-touch-icon.png" style="width:48px;height:48px;border-radius:12px;flex-shrink:0;">
            <div style="flex:1;">
              <div style="color:#e8c97a;font-size:14px;font-weight:600;margin-bottom:2px;">Install Noor</div>
              <div style="color:#8a7d6a;font-size:12px;">Add to your home screen for quick access ğŸŒ™</div>
            </div>
            <button onclick="installApp()" style="background:linear-gradient(135deg,#c9a84c,#a07828);border:none;border-radius:10px;color:#0a0a0f;font-size:13px;font-weight:700;padding:10px 16px;cursor:pointer;flex-shrink:0;font-family:'Tajawal',sans-serif;">Install</button>
            <button onclick="document.getElementById('android-install-banner').remove()" style="background:none;border:none;color:#7a6130;font-size:22px;cursor:pointer;padding:4px;flex-shrink:0;">âœ•</button>
          </div>`;
        document.body.appendChild(banner);
      }
    });

    async function installApp() {
      if (!deferredPrompt) return;
      deferredPrompt.prompt();
      const { outcome } = await deferredPrompt.userChoice;
      if (outcome === 'accepted') {
        localStorage.setItem('noor_android_installed', '1');
        document.getElementById('android-install-banner')?.remove();
      }
      deferredPrompt = null;
    }
  </script>
</body>
</html>
